[[handlers]]
path = "^/secure"
username = "user"
password = "pass"

[publisher]
domain = "test-publisher.com"
cookie_domain = ".test-publisher.com"
origin_url = "https://origin.test-publisher.com"
proxy_secret = "change-me-proxy-secret"

[synthetic]
counter_store = "counter_store"
opid_store = "opid_store"
secret_key = "trusted-server"
# Possible values
#   - "client_ip"
#   - "user_agent"
#   - "accept_language"
#   - "accept_encoding"
#   - "random_uuid"
template = "{{ client_ip }}:{{ user_agent }}:{{ accept_language }}:{{ accept_encoding }}"

# Custom headers to be included in every response
# Allows publishers to include tags such as X-Robots-Tag: noindex
# [response_headers]
# X-Custom-Header = "custom header value"

# Request Signing Configuration
# Enable signing of OpenRTB requests and other API calls
[request_signing]
enabled = false  # Set to true to enable request signing
config_store_id = "<fastly-config-store-id>" # set config/secret store ids for key rotation
secret_store_id = "<fastly-secret-store-id>"

[integrations.prebid]
enabled = true
server_url = "http://68.183.113.79:8000"
timeout_ms = 1000
bidders = ["kargo", "rubicon", "appnexus", "openx"]
auto_configure = false
debug = false
# debug_query_params = ""
# script_handler = "/prebid.js"

[integrations.nextjs]
enabled = false
rewrite_attributes = ["href", "link", "siteBaseUrl", "siteProductionDomain", "url"]
# Maximum combined payload size for cross-script RSC processing (bytes). Default is 10 MB.
max_combined_payload_bytes = 10485760

[integrations.testlight]
endpoint = "https://testlight.example/openrtb2/auction"
timeout_ms = 1200
rewrite_scripts = true

[integrations.didomi]
enabled = false
sdk_origin = "https://sdk.privacy-center.org"
api_origin = "https://api.privacy-center.org"

[integrations.permutive]
enabled = false
organization_id = ""
workspace_id = ""
project_id = ""
api_endpoint = "https://api.permutive.com"
secure_signals_endpoint = "https://secure-signals.permutive.app"

[integrations.lockr]
enabled = false
app_id = ""
api_endpoint = "https://identity.loc.kr"
sdk_url = "https://aim.loc.kr/identity-lockr-v1.0.js"
cache_ttl_seconds = 3600
rewrite_sdk = true

# Rewrite configuration for creative HTML/CSS processing
# [rewrite]
# Domains to exclude from first-party rewriting (supports wildcards like "*.example.com")
# URLs from these domains will be left as-is and not proxied
# exclude_domains = [
#     "*.edgecompute.app",
# ]


# Proxy configuration
# [proxy]
# Enable TLS certificate verification when proxying to HTTPS origins.
# Defaults to true. Set to false only for local development with self-signed certificates.
# certificate_check = true

[auction]
enabled = true
providers = ["prebid"]
# mediator = "adserver_mock"  # will use mediator when set
timeout_ms = 2000

[integrations.aps]
enabled = false
pub_id = "your-aps-publisher-id"
endpoint = "https://origin-mocktioneer.cdintel.com/e/dtb/bid"
timeout_ms = 1000

[integrations.adserver_mock]
enabled = false
endpoint = "https://origin-mocktioneer.cdintel.com/adserver/mediate"
timeout_ms = 1000


