# Trusted Server Environment Variables
# Copy this file to .env.dev, .env.staging, or .env.production and fill in values
# See docs/guide/configuration.md for details

# =============================================================================
# Publisher Settings
# =============================================================================
TRUSTED_SERVER__PUBLISHER__DOMAIN=publisher.com
TRUSTED_SERVER__PUBLISHER__COOKIE_DOMAIN=.publisher.com
TRUSTED_SERVER__PUBLISHER__ORIGIN_URL=https://origin.publisher.com
TRUSTED_SERVER__PUBLISHER__PROXY_SECRET=<your-proxy-secret>

# =============================================================================
# Synthetic ID Settings
# =============================================================================
TRUSTED_SERVER__SYNTHETIC__COUNTER_STORE=counter_store
TRUSTED_SERVER__SYNTHETIC__OPID_STORE=opid_store
TRUSTED_SERVER__SYNTHETIC__SECRET_KEY=<your-synthetic-secret>
# Template variables: client_ip, user_agent, first_party_id, auth_user_id, publisher_domain, accept_language
TRUSTED_SERVER__SYNTHETIC__TEMPLATE={{ client_ip }}:{{ user_agent }}:{{ first_party_id }}

# =============================================================================
# Request Signing (optional)
# =============================================================================
TRUSTED_SERVER__REQUEST_SIGNING__ENABLED=false
# TRUSTED_SERVER__REQUEST_SIGNING__CONFIG_STORE_ID=<fastly-config-store-id>
# TRUSTED_SERVER__REQUEST_SIGNING__SECRET_STORE_ID=<fastly-secret-store-id>

# =============================================================================
# Response Headers (optional)
# =============================================================================
# TRUSTED_SERVER__RESPONSE_HEADERS__X_CUSTOM_HEADER=custom-value

# =============================================================================
# Integrations
# =============================================================================

# Prebid
TRUSTED_SERVER__INTEGRATIONS__PREBID__ENABLED=false
# TRUSTED_SERVER__INTEGRATIONS__PREBID__SERVER_URL=https://prebid-server.com/openrtb2/auction
# TRUSTED_SERVER__INTEGRATIONS__PREBID__TIMEOUT_MS=1000
# TRUSTED_SERVER__INTEGRATIONS__PREBID__BIDDERS=kargo,rubicon,appnexus
# TRUSTED_SERVER__INTEGRATIONS__PREBID__AUTO_CONFIGURE=false
# TRUSTED_SERVER__INTEGRATIONS__PREBID__DEBUG=false

# Next.js
TRUSTED_SERVER__INTEGRATIONS__NEXTJS__ENABLED=false
# TRUSTED_SERVER__INTEGRATIONS__NEXTJS__REWRITE_ATTRIBUTES=href,link,url

# Didomi
TRUSTED_SERVER__INTEGRATIONS__DIDOMI__ENABLED=false
# TRUSTED_SERVER__INTEGRATIONS__DIDOMI__SDK_ORIGIN=https://sdk.privacy-center.org
# TRUSTED_SERVER__INTEGRATIONS__DIDOMI__API_ORIGIN=https://api.privacy-center.org

# Permutive
TRUSTED_SERVER__INTEGRATIONS__PERMUTIVE__ENABLED=false
# TRUSTED_SERVER__INTEGRATIONS__PERMUTIVE__ORGANIZATION_ID=
# TRUSTED_SERVER__INTEGRATIONS__PERMUTIVE__WORKSPACE_ID=
# TRUSTED_SERVER__INTEGRATIONS__PERMUTIVE__PROJECT_ID=

# Lockr
TRUSTED_SERVER__INTEGRATIONS__LOCKR__ENABLED=false
# TRUSTED_SERVER__INTEGRATIONS__LOCKR__APP_ID=
# TRUSTED_SERVER__INTEGRATIONS__LOCKR__CACHE_TTL_SECONDS=3600

# =============================================================================
# Rewrite Configuration (optional)
# =============================================================================
# Comma-separated list of domains to exclude from first-party rewriting
# TRUSTED_SERVER__REWRITE__EXCLUDE_DOMAINS=*.edgecompute.app
